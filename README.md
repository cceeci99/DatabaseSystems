# Υλοποίηση Συστημάτων Βάσεων Δεδομένων
# Εργασία 2

## Προσωπικά Στοιχεία

Όνομα: Tsvetomir Ivanov Α.Μ.: 1115201900066

Όνομα: Χρήστος Γαλανόπουλος Α.Μ.: 1115201900031

## Documentation

## 1. Δομη Project και οδηγίες εκτέλεσης
...

  Προσθήκη ενιαίου αρχείου επικεφαλίδας (header file):
- ht.h: Περιέχει τις κοινές δομές (Record, HF_Info:πίνακας ανοικτών αρχείων),  για πρωτεύον και δευτερεύον ευρετήριο.

## 2. Σχεδιαστικές επιλογές και παραδοχές

Ένα αρχείο δευτερεύοντος ευρετηρίου επεκτατού κατακερματισμού (SHT) περιέχει:

- 1 metadata block
- 1 ή παραπάνω hash blocks
- 2 ή παραπάνω data blocks

### a) Δομή metadata block

Ένα metadata block έχει την ακόλουθει δομή: 

- αναγνωρισιτκό του hash file -> 'HashFile'
- χαρακτήρας που καθορίζει σε ποιο πεδίο κλειδί δημιουργείται το δευτερεύον -> 'c' για city, 's' για surname
- τρέχον global depth
- αριθμός hash blocks
- id για το 1ο hash block
- id για το 2ο hash block
- ...

### b) Δομή hash block

Ένα hash block έχει την ακόλουθει δομή:

- bucket 0 που περιέχει ένα data block id
- bucket 1 που περιέχει ένα data block id
- ...

### c) Δομή data block

Ενα data block έχει την ακόλουθη δομή:

- τρέχον local depth
- αριθμός εγγραφών
- 1η εγγραφή
- 2η εγγραφή
- ...

Ο αριθμός των εγγραφών που χωράνε στο data block είναι δίνεται απο την σταθερά SECONDARY_BLOCK_CAP = 512-4/24 = 21 εγγραφές (24 ειναι το μέγεθος της δομης Secondary Record).

### Secondary Hash Table
Οπως και με το πρωτεύον ευρετήριο, το hash table είναι νοητό, εννοώντας ότι δεν υπάρχει κάποιο struct για την αναπαράστασή του αλλά συνίσταται από όλα τα hash blocks που περιέχουν τα buckets.

### Hash_Function
Το hash function δέχεται ως όρισμα το index-key μιας εγγραφής και κάνει καποιες κατάλληλες για συμοβολοσειρές ενέργειες κατακερματισμού επιστρέφοντας ενα string απο 14 χαρακτήρες ('0' και '1').
  
### HF_Info open_files: Πίνακας ανοικτών αρχείων
Χρησιμοποιείται ένας πίνακας χωρητικότητας 20, για αποθήκευση οποιονδήποτε ανοιχτών αρχείων, είτε ειναι πρωτευοντα ευρετήρια είτε δευτερεύοντα. Εχουν προστεθεί κάποια extra πεδία στο struct HF_Info:

- file descriptor
- τρέχον βάθος
- αριθμός εισαχθέντων εγγραφών
- τρέχον αριθμός κάδων
- τρέχον αριθμός hash blocks
- ονομα του αρχείου
- τύπος ευρετηρίου (πρωτεύον ή δευτερεύον)
- θεση στον πίνακα των ανοικτών αρχείων του αντίστοιχου αρχειου πρωτεύοντος ευρετηρίου πάνω στο οποίο εχει δημιουργηθεί ενα δευτερεύον
- τυπος κλειδιού (index-key) στην περίπτωση που ειναι δευτερεύον -> ('c' για city, 's' για surname)
- split -> χρησιμοποιείται για τον χειρισμό των split που μπορεί να προκύψουν σε ενα πρωτεύον ευρετήριο επηρεάζοντας ανάλογα το δευτερεύον
